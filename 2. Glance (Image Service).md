# Prerequisites
1. To create the database, complete these steps:
* Use the database access client to connect to the database server as the root user:
```shell
mysql
```
* Create the glance database:
```shell
MariaDB [(none)]> CREATE DATABASE glance;
```
* Grant proper access to the glance database:
```shell
MariaDB [(none)]> GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'localhost' IDENTIFIED BY 'Passw0rd';
MariaDB [(none)]> GRANT ALL PRIVILEGES ON glance.* TO 'glance'@'%' IDENTIFIED BY 'Passw0rd';
```
* Exit the database access client.
```shell
MariaDB [(none)]> exit;
```
2. Source the admin credentials to gain access to admin-only CLI commands:
```shell
. admin-openrc
```
3. To create the service credentials, complete these steps:
* Create the glance user:
```shell
openstack user create --domain default --password-prompt glance
```
```shell
root@controller:~# openstack user create --domain default --password-prompt glance
User Password:
Repeat User Password:
+---------------------+----------------------------------+
| Field               | Value                            |
+---------------------+----------------------------------+
| domain_id           | default                          |
| enabled             | True                             |
| id                  | 7e4292ec61564b7eb84aa5ee8ed2709d |
| name                | glance                           |
| options             | {}                               |
| password_expires_at | None                             |
+---------------------+----------------------------------+
```
* Add the admin role to the glance user and service project:
```shell
openstack role add --project service --user glance admin
```
* Create the glance service entity:
```shell
openstack service create --name glance --description "OpenStack Image" image
```
```shell
root@controller:~# openstack service create --name glance --description "OpenStack Image" image
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | OpenStack Image                  |
| enabled     | True                             |
| id          | 81be47740f2e4d43bb29cf9ea0ebc2e1 |
| name        | glance                           |
| type        | image                            |
+-------------+----------------------------------+
```
4. Create the Image service API endpoints:
```shell
openstack endpoint create --region RegionOne image public http://controller:9292
```
```shell
root@controller:~# openstack endpoint create --region RegionOne image public http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 819e03175c65484c9d7998600f6d7a64 |
| interface    | public                           |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 81be47740f2e4d43bb29cf9ea0ebc2e1 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
```
```shell
openstack endpoint create --region RegionOne image internal http://controller:9292
```
```shell
root@controller:~# openstack endpoint create --region RegionOne image internal http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | 689956cec73c45b5b8c86ae4bb8ddf9a |
| interface    | internal                         |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 81be47740f2e4d43bb29cf9ea0ebc2e1 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
```
```shell
openstack endpoint create --region RegionOne image admin http://controller:9292
```
```shell
root@controller:~# openstack endpoint create --region RegionOne image admin http://controller:9292
+--------------+----------------------------------+
| Field        | Value                            |
+--------------+----------------------------------+
| enabled      | True                             |
| id           | f942219667134d5ca1aa47ab54362d06 |
| interface    | admin                            |
| region       | RegionOne                        |
| region_id    | RegionOne                        |
| service_id   | 81be47740f2e4d43bb29cf9ea0ebc2e1 |
| service_name | glance                           |
| service_type | image                            |
| url          | http://controller:9292           |
+--------------+----------------------------------+
```
