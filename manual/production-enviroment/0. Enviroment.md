# RUN ON CONTROLLER
## PREPARE OS
---
1. Set hostname
```shell
hostnamectl set-hostname controller01.openstack.local
```
2. Configure networking using Netplan
```shell
rm -rf /etc/netplan/*
cat <<'EOF' > /etc/netplan/openstack.yaml
network:
  version: 2
  renderer: networkd
  ethernets:
    ens192:
      dhcp4: no
      dhcp6: no
      addresses:
        - 10.21.4.11/24
      routes:
        - to: default
          via: 10.21.4.1
      nameservers:
        addresses:
          - 10.21.4.100
EOF
netplan apply
```
3. Configure Nameserver
```shell
systemctl enable --now systemd-resolved
systemctl restart systemd-resolved
ln -sf /run/systemd/resolve/resolv.conf /etc/resolv.conf
```
4. Update Linux
```shell
apt update -y && apt upgrade -y
reboot
```
## INSTALL DATABASES
---
```shell
apt install -y mariadb-server python3-pymysql
```
```shell
cat <<'EOF' > /etc/mysql/mariadb.conf.d/99-openstack.cnf
[mysqld]
bind-address = 10.21.4.11

default-storage-engine = innodb
innodb_file_per_table = on
max_connections = 4096
collation-server = utf8_general_ci
character-set-server = utf8
EOF
```
```shell
systemctl enable --now mysql
systemctl restart mysql
```
```shell
mysql_secure_installation
```
